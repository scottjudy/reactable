---
title: "Penguins"
format:
  html:
    echo: false
    code-tools: true
---

A simple example based on Allison Horst's [Palmer Penguins](https://allisonhorst.github.io/palmerpenguins/) dataset. Here we look at how penguin body mass varies across both sex and species (use the provided inputs to filter the dataset by bill length and island):

```{ojs}
//| panel: input
viewof billLengthMin = Inputs.range(
  [32, 50], 
  {value: 35, step: 1, label: "Bill length (min):"}
)
viewof islands = Inputs.checkbox(
  ["Torgersen", "Biscoe", "Dream"], 
  { value: ["Torgersen", "Biscoe"], 
    label: "Islands:"
  }
)
```

```{ojs}
//| include: false
data = FileAttachment("palmer-penguins.csv").csv({ typed: true })

filtered = data.filter(penguin => {
  return penguin.bill_length > billLengthMin && islands.includes(penguin.island)
})

Reactable.setData('tbl', filtered)
```

## Data

```{r}
library(reactable)

data <- read.csv("palmer-penguins.csv")

reactable(
  data,
  wrap = FALSE,
  resizable = TRUE,
  elementId = "tbl"
)
```

## Plot

```{ojs}
Plot.rectY(filtered, 
  Plot.binX(
    { y: "count" }, 
    { x: "body_mass", fill: "species", thresholds: 20 }
  ))
  .plot({
    facet: {
      data: filtered,
      x: "sex",
      y: "species",
      marginRight: 80
    },
    marks: [
      Plot.frame(),
    ]
  }
)
```
